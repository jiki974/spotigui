#:import TopBarWidget spotigui.widgets.topbar.TopBarWidget
#:import PlaybackControlsWidget spotigui.widgets.playback_controls.PlaybackControlsWidget
#:import ProgressBarWidget spotigui.widgets.progress_bar.ProgressBarWidget

<NowPlayingScreen>:
    name: "now_playing"
    md_bg_color: 1, 1, 1, 1

    MDBoxLayout:
        orientation: "vertical"
        spacing: "5dp"
        padding: "5dp"
        md_bg_color: 1, 1, 1, 1

        TopBarWidget:
            id: top_bar

        # Album art section
        FloatLayout:
            height: "520dp"

            MDLoadingIndicator:
                id: spinner
                pos_hint: {"center_x": .5, "center_y": .5}
                shape_size: dp(200)

            AsyncImage:
                id: album_art
                source: ""
                size_hint: 1, 1
                fit_mode: "contain"
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                nocache: False
                mipmap: True
                anim_delay: -1
                opacity: 0
                on_load:
                    self.opacity = 1
                    spinner.stop()
                    spinner.opacity = 0
                on_source:
                    self.opacity = 0
                    spinner.opacity = 1
                    spinner.start()

        PlaybackControlsWidget:
            id: playback_controls

        ProgressBarWidget:
            id: progress_bar
