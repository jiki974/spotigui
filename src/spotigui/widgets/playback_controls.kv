<PlaybackControlsSheet>:
    sheet_type: "modal"
    size_hint_y: None
    height: dp(120)

    MDBoxLayout:
        orientation: "vertical"
        padding: "8dp"
        spacing: "8dp"

        # Header with title and close button
        MDBoxLayout:
            size_hint_y: None
            height: dp(40)
            spacing: "8dp"

            MDLabel:
                text: "Playback Controls"
                font_style: "Title"
                role: "small"
                size_hint_x: 0.8
                halign: "left"
                valign: "center"

            MDIconButton:
                icon: "close"
                size_hint_x: 0.2
                on_release: root.set_state("toggle")

        # Playback controls content
        MDBoxLayout:
            id: playback_content
            orientation: "horizontal"
            spacing: "8dp"
            size_hint_y: None
            height: dp(64)

            # Volume button (mute/unmute)
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                size_hint_x: 0.15

                MDIconButton:
                    id: volume_btn
                    icon: "volume-mute" if root.is_muted else "volume-high"
                    on_press: root._on_mute_toggle_click(self)

            # Previous button
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                size_hint_x: 0.2

                MDIconButton:
                    id: prev_btn
                    icon: "skip-previous"
                    on_press: root._on_previous(self)

            # Play/Pause button
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                size_hint_x: 0.3

                MDIconButton:
                    id: play_pause_btn
                    icon: "pause" if root.is_playing else "play"
                    on_press: root._on_play_pause(self)

            # Next button
            AnchorLayout:
                anchor_x: "center"
                anchor_y: "center"
                size_hint_x: 0.2

                MDIconButton:
                    id: next_btn
                    icon: "skip-next"
                    size: "64dp", "64dp"
                    on_press: root._on_next(self)

            # Spacer for symmetry
            Widget:
                size_hint_x: 0.15
