<PlaylistTile>:
    size_hint: None, None
    size: dp(320), dp(320)
    elevation: 4
    radius: [15]
    style: "elevated"

    FloatLayout:

        # Background cover image
        AsyncImage:
            id: playlist_image
            source: root.image_url
            fit_mode: "cover"
            mipmap: True
            allow_stretch: True
            keep_ratio: False
            pos: self.parent.pos
            size: self.parent.size
            opacity: 1 if root.image_url else 0
        # Placeholder icon (shown when no image)
        MDLabel:
            text: "â™«"
            halign: "center"
            valign: "center"
            font_size: sp(64)
            opacity: 0 if root.image_url else 1

        # Gradient overlay at bottom for text readability
        Widget:
            size_hint: 1, None
            height: dp(80)
            pos_hint: {"x": 0, "y": 0}
            canvas:
                Color:
                    rgba: 0, 0, 0, 0.7
                Rectangle:
                    pos: self.pos
                    size: self.size

        # Playlist info at bottom
        BoxLayout:
            orientation: "vertical"
            spacing: dp(2)
            size_hint: 1, None
            height: dp(60)
            padding: dp(12), 0, dp(12), 0
            pos_hint: {"x": 0, "y": 0}

            Widget:

            MDLabel:
                id: name_label
                text: root.playlist_name
                size_hint_y: None
                height: dp(32)
                bold: True
                halign: "left"
                valign: "bottom"
                font_size: sp(15)
                max_lines: 2
                shorten: True
                shorten_from: "right"
                color: 1, 1, 1, 1

            MDLabel:
                id: track_count_label
                text: root.track_count_text
                size_hint_y: None
                height: dp(18)
                halign: "left"
                valign: "top"
                font_size: sp(11)
                color: 1, 1, 1, 0.9
                opacity: 1 if root.track_count_text else 0
            